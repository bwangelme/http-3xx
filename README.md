# HTTP 重定向状态码详解

## 301 - Moved Permanently（永久重定向）

### 用途
- 资源永久移动到新位置
- 网站域名变更
- URL 结构的永久性改变

### 特点
- 浏览器会缓存这个重定向
- 搜索引擎会更新资源的新地址
- 后续请求会直接访问新地址，不再访问旧地址

### 使用场景
- 网站从 HTTP 迁移到 HTTPS
- 域名变更（如从 example.net 迁移到 example.com）
- 网站重构后的 URL 永久改变

## 302 - Found（临时重定向）

### 用途
- 资源临时移动到新位置
- 临时性的请求转发

### 特点
- 浏览器不会缓存重定向
- 搜索引擎不会更新资源地址
- 每次请求都会先访问原地址，再被重定向到新地址

### 使用场景
- 用户认证流程
  - 未登录用户访问需要认证的页面时，重定向到登录页面
  - 登录成功后，重定向回原始请求页面
- 网站临时维护页面
- A/B 测试
- 基于用户地理位置的重定向

## 303 - See Other

### 用途
- 通常用于 POST 请求后的重定向
- 表单提交后重定向到结果页面

### 特点
- 强制使用 GET 方法访问新地址
- 不会缓存重定向
- 明确指示客户端使用 GET 方法访问新资源

### 使用场景
- 表单提交后重定向到成功页面
- 防止表单重复提交
- 长时间操作完成后重定向到结果页面

## 307 - Temporary Redirect

### 用途
- 临时重定向，但严格保持原有 HTTP 方法

### 特点
- 与 302 类似，但保证请求方法不变
- 如果原请求是 POST，重定向后仍然是 POST
- 不会缓存重定向

### 使用场景
- 需要临时重定向但必须保持 HTTP 方法的场景
- API 版本切换时的临时重定向
- 负载均衡时的请求转发

## 308 - Permanent Redirect

### 用途
- 永久重定向，但严格保持原有 HTTP 方法

### 特点
- 类似于 301，但保证请求方法不变
- 浏览器会缓存这个重定向
- 如果原请求是 PUT/POST，重定向后方法保持不变

### 使用场景
- API 端点的永久迁移
- 需要保持 HTTP 方法的永久重定向
- RESTful API 的版本升级

## 重定向状态码的选择建议

1. 永久性重定向：
   - 如果需要保持 HTTP 方法：使用 308
   - 如果可以改变 HTTP 方法：使用 301

2. 临时性重定向：
   - 如果需要保持 HTTP 方法：使用 307
   - 如果可以改变 HTTP 方法：使用 302
   - 如果明确要求使用 GET 方法：使用 303

3. 特殊场景：
   - 表单提交后重定向：优先使用 303
   - 用户认证流程：通常使用 302
   - API 重定向：考虑使用 307（临时）或 308（永久）
